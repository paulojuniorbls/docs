---
title: 'Trabalhando com grupos'
description: 'Text, title, and styling in standard markdown'
icon: 'people-group'
---

   Ao trabalhar com grupos, você pode realizar diversas operações

    ### Funcionalidades Disponíveis

    - **Obter Todos os Grupos**
    - **Listar Todos os Contatos do Grupo**
    - **Enviar Mensagem para o Grupo**
    - **Enviar uma Marcação Fantasma para o Grupo**

    ## Obter Todos os Grupos

    Para obter uma lista de todos os grupos disponíveis, utilize a função **ApiEuAtendo1.ObterGrupos**.

    ### Exemplo de Código

    ```delphi
    // Chamar a função para obter todos os grupos
    ApiEuAtendo1.ObterGrupos;

    // Evento disparado ao obter todos os grupos
    procedure TForm9.ApiEuAtendo1ObterGrupos(Sender: TObject;
      const Grupos: TGroups);
    var
      i: Integer;
    begin
      memo1.Lines.Clear;
      for i := 0 to Length(Grupos) - 1 do
      begin
        memo1.Lines.Add('Grupo: ' + Grupos[i].GroupName);
        memo1.Lines.Add('ID: ' + Grupos[i].GroupID);
        memo1.Lines.Add('--------------------------------------');
      end;
    end;
    ```

    ## Listar Todos os Contatos do Grupo

    Para listar todos os contatos de um grupo específico, utilize a função **ApiEuAtendo1.ListarContatosDoGrupo** passando o ID do grupo.

    ### Exemplo de Código

    ```delphi
    // Chamar a função para listar os contatos de um grupo
    ApiEuAtendo1.ListarContatosDoGrupo(edtGroupID.Text);

    // Evento disparado ao listar os contatos do grupo
    procedure TForm9.ApiEuAtendo1ListarContatosDoGrupo(Sender: TObject;
      const Contatos: TContacts);
    var
      i: Integer;
    begin
      memo1.Lines.Clear;
      for i := 0 to Length(Contatos) - 1 do
      begin
        memo1.Lines.Add('Contato: ' + Contatos[i].ContactName);
        memo1.Lines.Add('Número: ' + Contatos[i].PhoneNumber);
        memo1.Lines.Add('--------------------------------------');
      end;
    end;
    ```

    ## Enviar Mensagem para o Grupo

    Para enviar uma mensagem para o grupo, utilize a função **ApiEuAtendo1.EnviarMensagemParaGrupo**, passando o ID do grupo e a mensagem.

    ### Exemplo de Código

    ```delphi
    // Chamar a função para enviar uma mensagem para o grupo
    procedure TForm9.EnviarMensagemParaGrupo;
    var
      ErrorMsg: string;
    begin
      if not ApiEuAtendo1.EnviarMensagemParaGrupo(edtGroupID.Text, edtMensagem.Text, ErrorMsg) then
      begin
        ShowMessage('Erro ao enviar mensagem: ' + ErrorMsg);
      end
      else
      begin
        ShowMessage('Mensagem enviada com sucesso!');
      end;
    end;
    ```

    ## Enviar uma Marcação Fantasma para o Grupo

    A marcação fantasma é uma mensagem que é enviada sem que o remetente seja visível. Para enviar uma marcação fantasma, utilize a função **ApiEuAtendo1.EnviarMarcacaoFantasma**.

    ### Exemplo de Código

    ```delphi
    // Chamar a função para enviar uma marcação fantasma para o grupo
    procedure TForm9.EnviarMarcacaoFantasma;
    var
      ErrorMsg: string;
    begin
      if not ApiEuAtendo1.EnviarMarcacaoFantasma(edtGroupID.Text, edtMensagem.Text, ErrorMsg) then
      begin
        ShowMessage('Erro ao enviar marcação fantasma: ' + ErrorMsg);
      end
      else
      begin
        ShowMessage('Marcação fantasma enviada com sucesso!');
      end;
    end;
    ```

    ## Tratamento de Erros
    Certifique-se de que os IDs dos grupos e os contatos estejam corretos. Caso haja algum erro, a variável `ErrorMsg` retornará uma descrição detalhada do erro para que você possa corrigi-lo.
