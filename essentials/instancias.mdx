---
title: 'instancias'
description: 'A funcionalidade de inst√¢ncias no componente euAtendo √© essencial para a gest√£o de m√∫ltiplas empresas simult√¢neos. Cada inst√¢ncia representa uma conex√£o ativa com um canal de comunica√ß√£o (como WhatsApp), permitindo que sua empresa tenha diferentes clientes configurados para diversos setores ou servi√ßos.
Nesta se√ß√£o, vamos aprender como criar, configurar e gerenciar inst√¢ncias, garantindo um controle eficiente sobre as opera√ß√µes de atendimento.'
icon: 'image'
---
<AccordionGroup>
  <Accordion icon="server" title="Autenticando o servidor da API">
    Para usar o componente euAtendo, √© necess√°rio definir o servidor URL e a GlobalAPI antes de utilizar as fun√ß√µes. Esses valores podem ser fixados no seu c√≥digo, pois geralmente n√£o mudam.

    Caso ainda n√£o possua um servidor privado, voc√™ pode testar utilizando o servidor **COMUNIT√ÅRIO DISPON√çVEL**:

    - **ApiGlobal:** ASD3F21APIDEVS6A5SPAULOJRDEVFA1
    - **endPoint:** https://apiv1demo.apidevs.app
    - **Manager:** https://apiv1demo.apidevs.app/manager

    Abaixo segue um exemplo de como configurar esses valores no evento **onShow** do formul√°rio em Delphi:

    ```delphi
    procedure TForm1.FormShow(Sender: TObject);
    begin
      ApiEuAtendo1.VersionAPI := TVersionOption.V1; // Definir a vers√£o da API
      ApiEuAtendo1.GlobalAPI := 'ASD3F21APIDEVS6A5SPAULOJRDEVFA1'; // Chave Global API
      ApiEuAtendo1.EvolutionApiURL := 'https://apiv1demo.apidevs.app'; // URL do servidor
    end;
    ```
  </Accordion>

  <Accordion icon="mobile" title="Inst√¢ncias 'Celulares de Clientes'">
    Cada inst√¢ncia representa um dispositivo conectado (por exemplo, o celular de um cliente). Pode ser utilizado para uma √∫nica empresa ou para diferentes empresas. 

    Sempre que uma inst√¢ncia √© criada, √© obrigat√≥rio salvar o nome e a senha da inst√¢ncia para uso futuro. Dessa forma, sempre que o ERP for inicializado, os valores ser√£o passados ao componente durante a sua inicializa√ß√£o.

    Antes de chamar a fun√ß√£o **CriarInstancia**, √© necess√°rio passar dois par√¢metros ao componente:

    ```delphi
    ApiEuAtendo1.NomeInstancia := edtNome.Text; // Nome da inst√¢ncia
    ApiEuAtendo1.ChaveApi      := edtSenha.Text; // Chave API da inst√¢ncia (Opcional)
    ```

    A cria√ß√£o de uma inst√¢ncia pode ser feita da seguinte forma:

    ```delphi
    var
      ErrorMsg: string;
    begin
      if not ApiEuAtendo1.CriarInstancia(ErrorMsg) then
      begin
        ShowMessage('Erro ao criar inst√¢ncia: ' + ErrorMsg);
        Exit;
      end;
    end;
    ```

    Ap√≥s chamar a fun√ß√£o para criar a inst√¢ncia, √© necess√°rio implementar o evento que ser√° disparado com as informa√ß√µes da inst√¢ncia rec√©m-criada:

    ```delphi
    procedure TForm9.ApiEuAtendo1CriarInstancia(Sender: TObject;
      const InstanceResponse: TInstanceResponse);
    begin
      edtNome.Text   := InstanceResponse.InstanceName; // Nome da inst√¢ncia
      edtStatus.Text := InstanceResponse.Status;       // Status da inst√¢ncia
      edtSenha.Text  := InstanceResponse.ApiKey;       // Chave API da inst√¢ncia

      // Configurar o componente com os dados da nova inst√¢ncia
      ApiEuAtendo1.ChaveApi      := InstanceResponse.ApiKey;
      ApiEuAtendo1.NomeInstancia := InstanceResponse.InstanceName;
    end;
    ```

    Assim, ap√≥s a cria√ß√£o da inst√¢ncia, os dados retornados (nome, status, chave API) s√£o armazenados e usados para futuras conex√µes.
  </Accordion>
  
  <Accordion icon="mobile" title="Conectar a uma Inst√¢ncia j√° Criada">
  
  # H1 Title
# üì± Conectar a uma Inst√¢ncia j√° Criada

Cada inst√¢ncia no **euAtendo** representa um dispositivo conectado, como o celular de um cliente. Ap√≥s criar uma inst√¢ncia, √© poss√≠vel reconectar-se a ela utilizando o nome e a chave da API previamente salvos.

## Pr√©-requisitos

- O nome da inst√¢ncia e a chave da API devem estar salvos no banco de dados ou em vari√°veis persistentes.
- O componente **ApiEuAtendo** deve estar devidamente configurado para realizar a conex√£o.

## Exemplo de C√≥digo

Aqui est√° um exemplo de como conectar a uma inst√¢ncia j√° criada, utilizando Delphi:

```delphi
procedure TForm9.ConectarInstanciaExistente;
var
  ErrorMsg: string;
  NomeInstancia: string;
  ChaveApi: string;
begin
  // Recupera o nome e a chave API da inst√¢ncia previamente armazenados
  NomeInstancia := edtNome.Text; // Nome da inst√¢ncia previamente salvo
  ChaveApi := edtSenha.Text;     // Chave API previamente salva (opcional)

  // Passa os valores ao componente
  ApiEuAtendo1.NomeInstancia := NomeInstancia;
  ApiEuAtendo1.ChaveApi := ChaveApi;

  // Tenta conectar √† inst√¢ncia
  if not ApiEuAtendo1.ConectarInstancia(ErrorMsg) then
  begin
    ShowMessage('Erro ao conectar √† inst√¢ncia: ' + ErrorMsg);
    Exit;
  end;

  ShowMessage('Conectado √† inst√¢ncia: ' + NomeInstancia);
end;
  
  </Accordion>
  
  
  
  
</AccordionGroup>